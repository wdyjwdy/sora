---
title: 从零实现「Static Site Generator」
category: Blog
toc: true
---

## 基础架构

文件目录如下，Build 之后会发生以下变化：

- `content` 下的 md 文件被转化为 html 文件。
- `static` 下的文件保持不变。

```tree
content
├── fruits
│   ├── apple.md
│   └── banana.md
└── index.md
static
├── imgs
│   ├── img1.svg
│   └── img2.svg
└── page
    ├── icon.svg
    ├── style.css
    └── script.js
```

## 功能实现

### 文件扫描

- 遍历 `content` 目录，将 md 转化为 html，然后输出到 `site` 目录。
- 遍历 `static` 目录，将所有文件直接拷贝到 `site` 目录。

### 文档解析

- 解析 Markdown（三方库）
- 解析 Frontmatter（三方库）
- 处理 Prefix
- 添加 TOC
- 添加 Syntax Highlight
- 添加 Heading ID

### 模版

- 使用 Handlebars
- 使用 md 文件都使用模版 build/template.html
- 模版能访问 md 的 html
- 模版能访问 md 的 frontmatter
- 模版能访问所有文档信息

```json
[
  { "title": "apple", "url": "site/apple.html", "catogory": "fruits" },
  { "title": "banana", "url": "site/banana.html", "catogory": "fruits" }
]
```

### 开发环境

- 支持 Live Reload。
- 支持 Incremental Build。
- 支持 Hot Module Replacement。

### 生产环境

- HTML Minify
- Image Lazy Load
